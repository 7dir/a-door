!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){AFRAME.registerComponent("door",{schema:{width:{type:"number",default:1},height:{type:"number",default:2},depth:{type:"number",default:.25},color:{type:"color",default:"#AAA"},texture:{type:"string",default:""},type:{type:"string",default:"simple"},open_direction:{type:"string",default:"right"},open_duration:{type:"number",default:3e3},close_duration:{type:"number",default:3e3},open_event:{type:"string",default:"open"},close_event:{type:"string",default:"close"},open_sound:{type:"string",default:""},close_sound:{type:"string",default:""}},init:function(){var e=this.data,t=this.el;this.createDoor(e,t),this.eventOpenCloseHandler=function(e){var n=e.type;t.querySelectorAll("a-sound").forEach(function(e){e.emit(n,null,!1)}),t.querySelectorAll("a-box").forEach(function(e){e.emit(n,null,!1)})},t.addEventListener(e.open_event,this.eventOpenCloseHandler),t.addEventListener(e.close_event,this.eventOpenCloseHandler)},update:function(e){var t=this.data,n=this.el;0!==Object.keys(e).length&&(t.width===e.width&&t.height===e.height&&t.depth===e.depth||(n.getObject3D("mesh").geometry=new THREE.BoxBufferGeometry(t.width,t.height,t.depth)),t.color!==e.color&&(n.getObject3D("mesh").material.color=t.color),e.open_event&&t.open_event!==e.open_event&&n.removeEventListener(e.open_event,this.eventOpenCloseHandler),t.open_event&&n.addEventListener(t.open_event,this.eventOpenCloseHandler),e.close_event&&t.close_event!==e.close_event&&n.removeEventListener(e.close_event,this.eventOpenCloseHandler),t.close_event&&n.addEventListener(t.close_event,this.eventOpenCloseHandler))},remove:function(){this.el.removeObject3D("mesh")},createDoor:function(e,t){if(""!==e.open_sound){var n=document.createElement("a-sound");n.setAttribute("src","src: "+e.open_sound),n.setAttribute("on",e.open_event),t.appendChild(n)}if(""!==e.close_sound){var o=document.createElement("a-sound");o.setAttribute("src","src: "+e.close_sound),o.setAttribute("on",e.close_event),t.appendChild(o)}for(var r="double"===e.type?2:1,i=0;i<r;i++){var s=document.createElement("a-box");s.setAttribute("color",e.color),s.setAttribute("depth",e.depth),s.setAttribute("src",e.texture);var d=document.createElement("a-animation");d.setAttribute("attribute","position");var u=document.createElement("a-animation");u.setAttribute("attribute","position");var a=0===i?-1:1;if("right"===e.open_direction||"left"===e.open_direction){var l=e.width/r;s.setAttribute("height",e.height),s.setAttribute("width",l);var p=0;2===r&&(p=l/2*a);var c=p+" 0 0";s.setAttribute("position",c),d.setAttribute("from",c),d.setAttribute("dur",e.open_duration),d.setAttribute("begin",e.open_event);var v=p;"right"===e.open_direction&&1===r||1===i&&2===r?v=p+l:("left"===e.open_direction&&1===r||0===i&&2===r)&&(v=p-l);var h=v+" 0 0";d.setAttribute("to",h),s.appendChild(d),u.setAttribute("dur",e.close_duration),u.setAttribute("from",h),u.setAttribute("begin",e.close_event),u.setAttribute("to",c),s.appendChild(u)}else if("up"===e.open_direction||"down"===e.open_direction){var b=e.height/r;s.setAttribute("height",b),s.setAttribute("width",e.width);var p=0;2===r&&(p=b/2*a);var c="0 "+p+" 0";s.setAttribute("position",c),d.setAttribute("from",c),d.setAttribute("dur",e.open_duration),d.setAttribute("begin",e.open_event);var _=p;"up"===e.open_direction&&1===r||1===i&&2===r?_=p+b:("down"===e.open_direction&&1===r||0===i&&2===r)&&(_=p-b);var h="0 "+_+" 0";d.setAttribute("to",h),s.appendChild(d),u.setAttribute("dur",e.close_duration),u.setAttribute("from",h),u.setAttribute("begin",e.close_event),u.setAttribute("to",c),s.appendChild(u)}t.appendChild(s)}}})}]);